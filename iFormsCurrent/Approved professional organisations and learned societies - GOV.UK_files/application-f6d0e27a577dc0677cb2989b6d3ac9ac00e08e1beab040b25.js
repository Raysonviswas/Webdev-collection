window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t,i){"use strict";var r=t.jQuery;i.Modules.TrackRadioGroup=function(){function n(t,o){t.on("submit",function(t){var e={transport:"beacon"},n=r(t.target).find("input:checked").val();void 0===n&&(n="submitted-without-choosing"),i.analytics.trackEvent("Radio button chosen",n+(o?"-with-hint":""),e)})}function e(e){r.ajax({url:"https://www.signin.service.gov.uk/hint",cache:!1,dataType:"jsonp",timeout:3e3}).then(function(t){o(e,t)},function(t){console.log("error",t)})}function o(t,e){null!=e&&!0===e.value&&(i.analytics.trackEvent("verify-hint","shown",{transport:"beacon"}),n(t,e.value))}this.start=function(t){n(t),e(t)},this.trackVerifyUser=function(t,e){o(t,e)}}}(window,window.GOVUK),function(t){"use strict";window.GOVUK=window.GOVUK||{},GOVUK.getCurrentLocation=function(){return t.location}}(window),window.GOVUK.Modules=window.GOVUK.Modules||{},function(){"use strict";window.GOVUK.Modules.GemToggleInputClassOnFocus=function(){this.start=function(t){function e(){return""===i.val()}function n(){i.addClass("focus")}function o(){e()&&i.removeClass("focus")}var i=t.find(".js-class-toggle");e()||n(),i.on("focus",n),i.on("blur",o)}}}(),window.GOVUK.Modules=window.GOVUK.Modules||{},function(){"use strict";window.GOVUK.Modules.GemToggle=function(){this.start=function(n){function t(){var t=$(this);t.attr("role","button"),t.attr("aria-controls",t.data("controls")),t.attr("aria-expanded",t.data("expanded"));var e=o(t);e.attr("aria-live","polite"),e.attr("role","region"),t.data("$targets",e)}function e(t){var e=$(t.target),n="true"===e.attr("aria-expanded"),o=e.data("$targets");n?(e.attr("aria-expanded",!1),o.addClass("js-hidden")):(e.attr("aria-expanded",!0),o.removeClass("js-hidden"));var i=e.data("toggled-text");"string"==typeof i&&(e.data("toggled-text",e.text()),e.text(i)),t.preventDefault()}function o(t){var e="#"+t.attr("aria-controls").split(" ").join(", #");return n.find(e)}var i="[data-controls][data-expanded]";n.on("click",i,e),n.find(i).each(t)}}}(),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(){"use strict";window.GOVUK.Modules.CopyToClipboard=function(){this.start=function(e){e[0].querySelector(".gem-c-button").addEventListener("click",function(t){t.preventDefault(),e[0].querySelector(".gem-c-input").select(),document.execCommand("copy")})}}}(window),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t,e){"use strict";var n=t.jQuery;e.Modules.ErrorSummary=function(){this.start=function(t){t.focus(),t.on("click",".js-error-summary__link",function(t){t.preventDefault();var e=n(this).attr("href");n(e).focus()})}}}(window,window.GOVUK),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){"use strict";window.GOVUK=window.GOVUK||{},t.Feedback=function(){this.start=function(e){function n(t){t.find('input[type="submit"]').prop("disabled",!0)}function o(t){t.find('input[type="submit"]').removeAttr("disabled")}function i(){f.$forms.attr("aria-hidden",!0),f.$pageIsNotUsefulButton.attr("aria-expanded",!1),f.$somethingIsWrongButton.attr("aria-expanded",!1)}function t(){f.$somethingIsWrongForm.append('<input type="hidden" name="javascript_enabled" value="true"/>'),f.$somethingIsWrongForm.append($('<input type="hidden" name="referrer">').val(document.referrer||"unknown"))}function r(t){t.attr("aria-expanded",!0),$("#"+t.attr("aria-controls")).attr("aria-hidden",!1)}function s(t){f.$activeForm=e.find("#"+t),f.$activeForm.toggleClass(p),f.$prompt.toggleClass(p),!f.$activeForm.hasClass(p)?f.$activeForm.find(".gem-c-input").first().focus():f.$activeForm=!1}function a(t){return{category:t.data("track-category"),action:t.data("track-action")}}function c(t){GOVUK.analytics&&GOVUK.analytics.trackEvent&&GOVUK.analytics.trackEvent(t.category,t.action)}function l(t){"undefined"!=typeof(t=['<h2 class="gem-c-feedback__heading">',"  Sorry, we\u2019re unable to receive your message right now. ","</h2>","<p>If the problem persists, we have other ways for you to provide",' feedback on the <a href="/contact/govuk">contact page</a>.</p>'].join("")).responseJSON&&(t="undefined"==typeof t.responseJSON.message?t:t.responseJSON.message),f.$activeForm.find(".js-errors").html(t).removeClass(p).focus()}function u(){f.$promptQuestions.addClass(p),f.$promptSuccessMessage.removeClass(p).focus()}function d(){f.$prompt.removeClass(p),f.$prompt.focus()}this.$prompt=e.find(".js-prompt"),this.$fields=e.find(".gem-c-feedback__form-field"),this.$forms=e.find(".js-feedback-form"),this.$toggleForms=e.find(".js-toggle-form"),this.$closeForms=e.find(".js-close-form"),this.$activeForm=!1,this.$pageIsUsefulButton=e.find(".js-page-is-useful"),this.$pageIsNotUsefulButton=e.find(".js-page-is-not-useful"),this.$somethingIsWrongButton=e.find(".js-something-is-wrong"),this.$promptQuestions=e.find(".js-prompt-questions"),this.$promptSuccessMessage=e.find(".js-prompt-success"),this.$somethingIsWrongForm=e.find("#something-is-wrong");var f=this,p="js-hidden";i(),t(),this.$toggleForms.on("click",function(t){t.preventDefault(),s($(t.target).attr("aria-controls")),c(a($(this))),r($(this))}),this.$closeForms.on("click",function(t){t.preventDefault(),s($(t.target).attr("aria-controls")),c(a($(this))),i(),d()}),this.$pageIsUsefulButton.on("click",function(t){t.preventDefault(),c(a(f.$pageIsUsefulButton)),u(),d()}),e.find("form").on("submit",function(t){t.preventDefault();var e=$(this);$.ajax({type:"POST",url:e.attr("action"),dataType:"json",data:e.serialize(),beforeSend:n(e),timeout:6e3}).done(function(t){c(a(e)),u(t.message),d(),i(),f.$activeForm.toggleClass(p)}).fail(function(t){l(t),o(e)})})}}}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(){"use strict";window.GOVUK.Modules.InitialFocus=function(){this.start=function(t){t.focus()}}}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("GOVUKFrontend",e):t.GOVUKFrontend=e()}(this,function(){"use strict";function t(t,e){if(window.NodeList.prototype.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e.call(window,t[n],n,t)}function e(t){this.$module=t,this.$inputs=t.querySelectorAll('input[type="radio"]')}return function(){var a,c,l,u;"defineProperty"in Object&&function(){try{var t={};return Object.defineProperty(t,"test",{value:42}),!0}catch(e){return!1}}()||(a=Object.defineProperty,c=Object.prototype.hasOwnProperty("__defineGetter__"),l="Getters & setters cannot be defined on this javascript engine",u="A property cannot both have accessors and be writable or have a value",Object.defineProperty=function d(t,e,n){if(a&&(t===window||t===document||t===Element.prototype||t instanceof Element))return a(t,e,n);if(null===t||!(t instanceof Object||"object"==typeof t))throw new TypeError("Object.defineProperty called on non-object");if(!(n instanceof Object))throw new TypeError("Property description must be an object");var o=String(e),i="value"in n||"writable"in n,r="get"in n&&typeof n.get,s="set"in n&&typeof n.set;if(r){if("function"!==r)throw new TypeError("Getter must be a function");if(!c)throw new TypeError(l);if(i)throw new TypeError(u);Object.__defineGetter__.call(t,o,n.get)}else t[o]=n.value;if(s){if("function"!==s)throw new TypeError("Setter must be a function");if(!c)throw new TypeError(l);if(i)throw new TypeError(u);Object.__defineSetter__.call(t,o,n.set)}return"value"in n&&(t[o]=n.value),t})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(){"bind"in Function.prototype||Object.defineProperty(Function.prototype,"bind",{value:function k(e){var n,t=Array,o=Object,i=o.prototype,r=t.prototype,s=function s(){},a=i.toString,c="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,l=Function.prototype.toString,u=function u(t){try{return l.call(t),!0}catch(e){return!1}},d="[object Function]",f="[object GeneratorFunction]";n=function n(t){if("function"!=typeof t)return!1;if(c)return u(t);var e=a.call(t);return e===d||e===f};var p=r.slice,h=r.concat,m=r.push,w=Math.max,v=this;if(!n(v))throw new TypeError("Function.prototype.bind called on incompatible "+v);for(var g,b=p.call(arguments,1),y=function(){if(this instanceof g){var t=v.apply(this,h.call(b,p.call(arguments)));return o(t)===t?t:this}return v.apply(e,h.call(b,p.call(arguments)))},E=w(0,v.length-b.length),j=[],O=0;O<E;O++)m.call(j,"$"+O);return g=Function("binder","return function ("+j.join(",")+"){ return binder.apply(this, arguments); }")(y),v.prototype&&(s.prototype=v.prototype,g.prototype=new s,s.prototype=null),g}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(){"Window"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&function(t){t.constructor?t.Window=t.constructor:(t.Window=t.constructor=new Function("return function Window() {}")()).prototype=this}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(){"Document"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&(this.HTMLDocument?this.Document=this.HTMLDocument:(this.Document=this.HTMLDocument=document.constructor=new Function("return function Document() {}")(),this.Document.prototype=document))}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(){"Element"in this&&"HTMLElement"in this||function(){function t(){return r--||clearTimeout(e),!(!document.body||document.body.prototype||!/(complete|interactive)/.test(document.readyState))&&(l(document,!0),e&&document.body.prototype&&clearTimeout(e),!!document.body.prototype)}if(!window.Element||window.HTMLElement){window.Element=window.HTMLElement=new Function("return function Element() {}")();var e,n=document.appendChild(document.createElement("body")),o=n.appendChild(document.createElement("iframe")).contentWindow.document,a=Element.prototype=o.appendChild(o.createElement("*")),c={},l=function(t,e){var n,o,i,r=t.childNodes||[],s=-1;if(1===t.nodeType&&t.constructor!==Element)for(n in t.constructor=Element,c)o=c[n],t[n]=o;for(;i=e&&r[++s];)l(i,e);return t},u=document.getElementsByTagName("*"),i=document.createElement,r=100;a.attachEvent("onpropertychange",function(t){for(var e,n=t.propertyName,o=!c.hasOwnProperty(n),i=a[n],r=c[n],s=-1;e=u[++s];)1===e.nodeType&&(o||e[n]===r)&&(e[n]=i);c[n]=i}),a.constructor=Element,a.hasAttribute||(a.hasAttribute=function s(t){return null!==this.getAttribute(t)}),t()||(document.onreadystatechange=t,e=setInterval(t,25)),document.createElement=function d(t){var e=i(String(t).toLowerCase());return l(e)},document.removeChild(n)}else window.HTMLElement=window.Element}()}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(l){(function(t){if(!("Event"in t))return!1;if("function"==typeof t.Event)return!0;try{return new Event("click"),!0}catch(e){return!1}})(this)||function(){function u(t,e){for(var n=-1,o=t.length;++n<o;)if(n in t&&t[n]===e)return n;return-1}var i={click:1,dblclick:1,keyup:1,keypress:1,keydown:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseenter:1,mouseleave:1,mouseout:1,storage:1,storagecommit:1,textinput:1};if("undefined"!=typeof document&&"undefined"!=typeof window){var t=window.Event&&window.Event.prototype||null;window.Event=Window.prototype.Event=function r(t,e){if(!t)throw new Error("Not enough arguments");var n;if("createEvent"in document){n=document.createEvent("Event");var o=!(!e||e.bubbles===l)&&e.bubbles,i=!(!e||e.cancelable===l)&&e.cancelable;return n.initEvent(t,o,i),n}return(n=document.createEventObject()).type=t,n.bubbles=!(!e||e.bubbles===l)&&e.bubbles,n.cancelable=!(!e||e.cancelable===l)&&e.cancelable,n},t&&Object.defineProperty(window.Event,"prototype",{configurable:!1,enumerable:!1,writable:!0,value:t}),"createEvent"in document||(window.addEventListener=Window.prototype.addEventListener=Document.prototype.addEventListener=Element.prototype.addEventListener=function s(t,e){var l=this,n=t,o=e;if(l===window&&n in i)throw new Error("In IE8 the event: "+n+" is not available on the window object. Please see https://github.com/Financial-Times/polyfill-service/issues/317 for more information.");l._events||(l._events={}),l._events[n]||(l._events[n]=function(t){var e,n=l._events[t.type].list,o=n.slice(),i=-1,r=o.length;for(t.preventDefault=function s(){!1!==t.cancelable&&(t.returnValue=!1)},t.stopPropagation=function a(){t.cancelBubble=!0},t.stopImmediatePropagation=function c(){t.cancelBubble=!0,t.cancelImmediate=!0},t.currentTarget=l,t.relatedTarget=t.fromElement||null,t.target=t.target||t.srcElement||l,t.timeStamp=(new Date).getTime(),t.clientX&&(t.pageX=t.clientX+document.documentElement.scrollLeft,t.pageY=t.clientY+document.documentElement.scrollTop);++i<r&&!t.cancelImmediate;)i in o&&-1!==u(n,e=o[i])&&"function"==typeof e&&e.call(l,t)},l._events[n].list=[],l.attachEvent&&l.attachEvent("on"+n,l._events[n])),l._events[n].list.push(o)},window.removeEventListener=Window.prototype.removeEventListener=Document.prototype.removeEventListener=Element.prototype.removeEventListener=function a(t,e){var n,o=this,i=t,r=e;o._events&&o._events[i]&&o._events[i].list&&-1!==(n=u(o._events[i].list,r))&&(o._events[i].list.splice(n,1),o._events[i].list.length||(o.detachEvent&&o.detachEvent("on"+i,o._events[i]),delete o._events[i]))},window.dispatchEvent=Window.prototype.dispatchEvent=Document.prototype.dispatchEvent=Element.prototype.dispatchEvent=function c(t){if(!arguments.length)throw new Error("Not enough arguments");if(!t||"string"!=typeof t.type)throw new Error("DOM Events Exception 0");var e=this,n=t.type;try{if(!t.bubbles){t.cancelBubble=!0;var o=function(t){t.cancelBubble=!0,(e||window).detachEvent("on"+n,o)};this.attachEvent("on"+n,o)}this.fireEvent("on"+n,t)}catch(i){for(t.target=e;"_events"in(t.currentTarget=e)&&"function"==typeof e._events[n]&&e._events[n].call(e,t),"function"==typeof e["on"+n]&&e["on"+n].call(e,t),(e=9===e.nodeType?e.parentWindow:e.parentNode)&&!t.cancelBubble;);}return!0},document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0}))}))}}()}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(f){var t,e,n;"DOMTokenList"in this&&(!("classList"in(t=document.createElement("x")))||!t.classList.toggle("x",!1)&&!t.className)||("DOMTokenList"in(e=this)&&e.DOMTokenList&&(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg")||document.createElementNS("http://www.w3.org/2000/svg","svg").classList instanceof DOMTokenList)||(e.DOMTokenList=function(){var i=!0,n=function(t,e,n,o){Object.defineProperty?Object.defineProperty(t,e,{configurable:!1===i||!!o,get:n}):t.__defineGetter__(e,n)};try{n({},"support")}catch(t){i=!1}return function(i,r){var s=this,a=[],c={},l=0,t=0,e=function(t){n(s,t,function(){return d(),a[t]},!1)},u=function(){if(t<=l)for(;t<l;++t)e(t)},d=function(){var t,e,n=arguments,o=/\s+/;if(n.length)for(e=0;e<n.length;++e)if(o.test(n[e]))throw(t=new SyntaxError('String "'+n[e]+'" contains an invalid character')).code=5,t.name="InvalidCharacterError",t;for(""===(a="object"==typeof i[r]?(""+i[r].baseVal).replace(/^\s+|\s+$/g,"").split(o):(""+i[r]).replace(/^\s+|\s+$/g,"").split(o))[0]&&(a=[]),c={},e=0;e<a.length;++e)c[a[e]]=!0;l=a.length,u()};return d(),n(s,"length",function(){return d(),l}),s.toLocaleString=s.toString=function(){return d(),a.join(" ")},s.item=function(t){return d(),a[t]},s.contains=function(t){return d(),!!c[t]},s.add=function(){d.apply(s,t=arguments);for(var t,e,n=0,o=t.length;n<o;++n)e=t[n],c[e]||(a.push(e),c[e]=!0);l!==a.length&&(l=a.length>>>0,"object"==typeof i[r]?i[r].baseVal=a.join(" "):i[r]=a.join(" "),u())},s.remove=function(){d.apply(s,t=arguments);for(var t,e={},n=0,o=[];n<t.length;++n)e[t[n]]=!0,delete c[t[n]];for(n=0;n<a.length;++n)e[a[n]]||o.push(a[n]);l=(a=o).length>>>0,"object"==typeof i[r]?i[r].baseVal=a.join(" "):i[r]=a.join(" "),u()},s.toggle=function(t,e){return d.apply(s,[t]),f!==e?e?(s.add(t),!0):(s.remove(t),!1):c[t]?(s.remove(t),!1):(s.add(t),!0)},s}}()),"classList"in(n=document.createElement("span"))&&(n.classList.toggle("x",!1),n.classList.contains("x")&&(n.classList.constructor.prototype.toggle=function i(t,e){var n=e;if(n!==f)return this[(n=!!n)?"add":"remove"](t),n;var o=!this.contains(t);return this[o?"add":"remove"](t),o})),function(){var t=document.createElement("span");if("classList"in t&&(t.classList.add("a","b"),!t.classList.contains("b"))){var o=t.classList.constructor.prototype.add;t.classList.constructor.prototype.add=function(){for(var t=arguments,e=arguments.length,n=0;n<e;n++)o.call(this,t[n])}}}(),function(){var t=document.createElement("span");if("classList"in t&&(t.classList.add("a"),t.classList.add("b"),t.classList.remove("a","b"),t.classList.contains("b"))){var o=t.classList.constructor.prototype.remove;t.classList.constructor.prototype.remove=function(){for(var t=arguments,e=arguments.length,n=0;n<e;n++)o.call(this,t[n])}}}())}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(){var t;"document"in this&&"classList"in document.documentElement&&"Element"in this&&"classList"in Element.prototype&&((t=document.createElement("span")).classList.add("a","b"),t.classList.contains("b"))||function(t){var u=!0,d=function(t,e,n,o){Object.defineProperty?Object.defineProperty(t,e,{configurable:!1===u||!!o,get:n}):t.__defineGetter__(e,n)};try{d({},"support")}catch(e){u=!1}var f=function(t,c,l){d(t.prototype,c,function(){var t,e=this,n="__defineGetter__DEFINE_PROPERTY"+c;if(e[n])return t;if(!(e[n]=!0)===u){for(var o,i=f.mirror||document.createElement("div"),r=i.childNodes,s=r.length,a=0;a<s;++a)if(r[a]._R===e){o=r[a];break}o||(o=i.appendChild(document.createElement("div"))),t=DOMTokenList.call(o,e,l)}else t=new DOMTokenList(e,l);return d(e,c,function(){return t}),delete e[n],t},!0)};f(t.Element,"classList","className"),f(t.HTMLElement,"classList","className"),f(t.HTMLLinkElement,"relList","rel"),f(t.HTMLAnchorElement,"relList","rel"),f(t.HTMLAreaElement,"relList","rel")}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),e.prototype.init=function(){var n=this.$module;t(this.$inputs,function(t){var e=t.getAttribute("data-aria-controls");e&&n.querySelector("#"+e)&&(t.setAttribute("aria-controls",e),t.removeAttribute("data-aria-controls"),this.setAttributes(t))}.bind(this)),n.addEventListener("click",this.handleClick.bind(this))},e.prototype.setAttributes=function(t){var e=t.checked;t.setAttribute("aria-expanded",e),document.querySelector("#"+t.getAttribute("aria-controls")).classList.toggle("govuk-radios__conditional--hidden",!e)},e.prototype.handleClick=function(){t(this.$inputs,function(t){var e="radio"===t.getAttribute("type"),n=t.getAttribute("aria-controls");e&&n&&this.setAttributes(t)}.bind(this))},e}),window.GOVUK=window.GOVUK||{},window.GOVUK.FrontendModules=window.GOVUK.FrontendModules||{},function(t,e){"use strict";function n(t,e){if(window.NodeList.prototype.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e.call(window,t[n],n,t)}e.FrontendModules.Radios=window.GOVUKFrontend,n(document.querySelectorAll('[data-module="radios"]'),function(t){new e.FrontendModules.Radios(t).init()})}(window,window.GOVUK),function(t){"use strict";window.GOVUK=window.GOVUK||{},t.Gemstepnav=function(){function x(e){function t(){i(!0)}function n(){i(!1)}function o(){i(s())}function i(t){e.toggleClass("step-is-shown",t),l.toggleClass("js-hidden",!t),c.attr("aria-expanded",t),e.find(".js-toggle-link").html(t?K.hideText:K.showText)}function r(){return e.hasClass("step-is-shown")}function s(){return!r()}function a(){return l.find(".js-link").length}var c=e.find(".js-step-title-button"),l=e.find(".js-panel");this.title=e.find(".js-step-title-text").text().trim(),this.element=e,this.show=t,this.hide=n,this.toggle=o,this.setIsShown=i,this.isShown=r,this.isHidden=s,this.numberOfContentItems=a}function L(t,e,n,o,i){function r(){var t={label:s(),dimension28:e.numberOfContentItems().toString()};o.track("pageElementInteraction",a(),t)}function s(){return p.closest(".js-toggle-panel").attr("data-position")+" - "+e.title+" - "+c()+": "+V+f()}function a(){return e.isHidden()?"stepNavHidden":"stepNavShown"}function c(){return l()?d()+" click":u()?"Heading click":"Elsewhere click"}function l(){return p.hasClass("js-toggle-link")}function u(){return p.hasClass("js-step-title-text")}function d(){return e.isHidden()?"Minus":"Plus"}function f(){return i?" ; optional":""}this.track=r;var p=$(t.target)}function T(n,o,i){function t(){var t={label:$(n.target).attr("href")+" : "+V},e=$(n.target).closest(".gem-c-step-nav__list").attr("data-length");e&&(t.dimension28=e),o.track("stepNavLinkClicked",i,t)}this.track=t}function U(o,i,r){this.track=function(t,e,n){GOVUK.analytics&&GOVUK.analytics.trackEvent&&((n=n||{}).dimension26=n.dimension26||o.toString(),n.dimension27=n.dimension27||i.toString(),n.dimension96=n.dimension96||r,GOVUK.analytics.trackEvent(t,e,n))}}var V,S,K={},M=!1,C="govuk-step-nav-active-link",F="gem-c-step-nav__list-item--active",I="gem-c-step-nav__step--active",A="#content";this.start=function(o){function t(){K.showText=o.attr("data-show-text"),K.hideText=o.attr("data-hide-text"),K.showAllText=o.attr("data-show-all-text"),K.hideAllText=o.attr("data-hide-all-text")}function e(){o.prepend('<div class="gem-c-step-nav__controls"><button aria-expanded="false" class="gem-c-step-nav__button gem-c-step-nav__button--controls js-step-controls-button">'+K.showAllText+"</button></div>")}function n(){O.each(function(){K.showText;i($(this))&&K.hideText,$(this).find(".js-toggle-link").length||$(this).find(".js-step-title-button").append('<span class="gem-c-step-nav__toggle-link js-toggle-link" aria-hidden="true" hidden></span>')})}function i(t){return void 0!==t.closest(".js-step").data("show")}function r(){var t=o.find(".js-panel").first().attr("id");(E=o.find(".js-step-controls-button")).attr("aria-controls",t)}function s(t){var e=[];$.each(j,function(){new x($(this)).setIsShown(t),t&&e.push($(this).attr("id"))}),t?f(S,JSON.stringify(e)):h(S)}function a(){var n=p(S)||[];$.each(j,function(){var t=$(this).attr("id"),e=new x($(this));M&&-1<n.indexOf(t)||void 0!==$(this).attr("data-show")?e.setIsShown(!0):e.setIsShown(!1)}),0<n.length&&(E.attr("aria-expanded",!0),y())}function c(){$.each(j,function(){var t=$(this),e=t.find(".js-step-title"),n=t.find(".js-panel").first().attr("id");e.wrapInner('<span class="js-step-title-text"></span>'),e.wrapInner('<button class="gem-c-step-nav__button gem-c-step-nav__button--title js-step-title-button" aria-expanded="false" aria-controls="'+n+'"></button>')})}function l(i){o.find(".js-toggle-panel").click(function(t){var e=$(this).closest(".js-step"),n=new x(e);n.toggle();var o=void 0!==e.data("optional");new L(t,n,j,i,o).track(),y(),u(e)})}function u(t){if(M){var e=JSON.parse(p(S))||[],n=t.attr("id");if(t.hasClass("step-is-shown"))e.push(n);else{var o=e.indexOf(n);-1<o&&e.splice(o,1)}f(S,JSON.stringify(e))}}function d(n){o.find(".js-link").click(function(t){new T(t,n,$(this).attr("data-position")).track();var e=$(this).attr("href");"external"!==$(this).attr("rel")&&f(C,$(this).attr("data-position")),e==A&&(m($(this)),g())})}function f(t,e){sessionStorage.setItem(t,e)}function p(t){return sessionStorage.getItem(t)}function h(t){sessionStorage.removeItem(t)}function m(t){o.find("."+F).removeClass(F),t.parent().addClass(F)}function w(){var t=o.find(".js-list-item."+F);if(!(t.length<=1)){var e=p(C)||o.find("."+F).first().attr("data-position");o.find('.js-link[data-position="'+e+'"]').parent().hasClass(F)||(e=o.find("."+F).first().find(".js-link").attr("data-position")),v(t,e),g()}}function v(t,e){t.each(function(){$(this).find(".js-link").attr("data-position").toString()!==e.toString()&&($(this).removeClass(F),$(this).find(".visuallyhidden").remove())})}function g(){o.find("."+I).removeClass(I).removeAttr("data-show"),o.find("."+F).closest(".gem-c-step-nav__step").addClass(I).attr("data-show","")}function b(e){(E=o.find(".js-step-controls-button")).on("click",function(){var t;return E.text()==K.showAllText?(E.text(K.hideAllText),o.find(".js-toggle-link").html(K.hideText),t=!0,e.track("pageElementInteraction","stepNavAllShown",{label:K.showAllText+": "+V})):(E.text(K.showAllText),o.find(".js-toggle-link").html(K.showText),t=!1,e.track("pageElementInteraction","stepNavAllHidden",{label:K.hideAllText+": "+V})),s(t),E.attr("aria-expanded",t),y(),!1})}function y(){o.find(".step-is-shown").length===k?E.text(K.hideAllText):E.text(K.showAllText)}o.addClass("gem-c-step-nav--active"),o.removeClass("js-hidden"),V=o.hasClass("gem-c-step-nav--large")?"Big":"Small",M=!!o.filter("[data-remember]").length&&"Big"==V;var E,j=o.find(".js-step"),O=o.find(".js-toggle-panel"),k=o.find(".js-panel").length,_=o.find(".gem-c-step-nav__link").length;(S=o.data("id")||!1)&&(C=C+"_"+S);var G=new U(k,_,S);t(),c(),e(),n(),r(),w(),a(),l(G),b(G),d(G)}}}(window.GOVUK.Modules);